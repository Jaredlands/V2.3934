[gcode_macro SET_NOZZLE_LIGHT]
gcode:
  {% if params.VALUE is defined %}  
    SET_PIN PIN=nozzle_light VALUE={[params.VALUE|float,1]|min}
  {% endif %}
  {% if params.TIMEOUT is defined%}
      UPDATE_DELAYED_GCODE ID=_nozzle_light_delayed DURATION={params.TIMEOUT|int *60}
  {% endif %}


[gcode_macro _set_nozzle_light]
gcode:
  {% set intensity= params.VALUE|default(1)|float %}
    SET_LED LED=toolhead_leds WHITE={intensity} INDEX=2
    SET_LED LED=toolhead_leds WHITE={intensity} INDEX=3


[delayed_gcode _nozzle_light_delayed]
gcode:
    SET_NOZZLE_LIGHT VALUE=0