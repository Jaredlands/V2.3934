# Useful to save pin value in file
[gcode_macro SET_PIN]
rename_existing: SET_PIN_UNSAVED
description: save pin value
variable_to_save: [ 'caselight_warm',
                    'caselight_cold',
                    'caselight_on',
                    'leds_intensity',
                    'beeper_volume']
variable_gcode: {'nozzle_light':'SET_NOZZLE_LIGHT'}                   
gcode:

  SET_PIN_UNSAVED { rawparams }
  {%if params.PIN|string in gcode %}
    {gcode[params.PIN|string]} {rawparams}
  {% endif %}
  {% if params.PIN|string in to_save %}
    UPDATE_VARIABLE VARIABLE={params.PIN|string} VALUE={ params.VALUE|float }
  {% endif %}